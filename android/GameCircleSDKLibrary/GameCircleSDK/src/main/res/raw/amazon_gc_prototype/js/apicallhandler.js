/*! Copyright 2013 Amazon Digital Services, Inc. All rights reserved. */
APICallHandler=(function(){var d=function(r,o,q){var t=r;var s=o;var n=q;var p="APICall";this["getHandledType"]=function(){return p};this["handleRequest"]=function(y){var Z=$.Deferred();if(!(y instanceof Request)){console.log("APICallHandler: handleRequest: input was not of type Request");var K=new Result(constants.NativeCallResultCode.ERROR,{});Z.resolve(K)}else{var v=y.getType();var aa=y.getParams();console.log("APICallHandler: handleRequest: message is: "+JSON.stringify(aa));var A=""+aa[constants.ServiceActionCode.ACTION_CODE_KEY];var L={};switch(A){case constants.ServiceActionCode.AUTHORIZE_SESSION:t.onInitialize();t.getInitializationPromise().always(function(){var ab={};ab[constants.BindingKeys.AUTHORIZE_RESULT_BUNDLE_KEY]=constants.AuthorizeKeys.AUTHORIZED;var ac=constants.NativeCallResultCode.SUCCESS;var ad=new Result(ac,ab);Z.resolve(ad)});break;case constants.ServiceActionCode.START_SESSION:s.startSession(aa[constants.BindingKeys.REQUEST_TIMESTAMP]);t.startSession();var R=new Result(constants.NativeCallResultCode.SUCCESS,{});Z.resolve(R);break;case constants.ServiceActionCode.STOP_SESSION:s.stopSession(aa[constants.BindingKeys.REQUEST_TIMESTAMP]);var R=new Result(constants.NativeCallResultCode.SUCCESS,{});Z.resolve(R);break;case constants.ServiceActionCode.SHOW_SIGN_IN_PAGE:t.showSignInPage();var R=new Result(constants.NativeCallResultCode.SUCCESS,{});Z.resolve(R);break;case constants.ServiceActionCode.SHOW_TOS_PAGE:t.showOverlay(constants.OverlayActionCode.SHOW_TERMS_OF_SERVICE);var R=new Result(constants.NativeCallResultCode.SUCCESS,{});Z.resolve(R);break;case constants.ServiceActionCode.SET_OPT_IN:var z=aa[constants.NativeCallKeys.HAS_OPTED_IN];t.setOptIn(z);R=new Result(constants.NativeCallResultCode.SUCCESS,{});Z.resolve(R);break;case constants.ServiceActionCode.AUTHENTICATE:t.authenticate();var R=new Result(constants.NativeCallResultCode.SUCCESS,{});Z.resolve(R);break;case constants.ServiceActionCode.UPDATE_COUNTRY_OF_RESIDENCE:t.updateCOR(y.getParams()[constants.BindingKeys.COUNTRY_OF_RESIDENCE]);var R=new Result(constants.NativeCallResultCode.SUCCESS,{});Z.resolve(R);break;case constants.ServiceActionCode.IS_WHISPERSYNC_ENABLED:n.getGuestMode().always(function(ab){n.isKindle().always(function(ad){var ac=$.Deferred();if(ad){n.isKindleWhispersyncSettingEnabled().always(function(ae){ac.resolve(ae)})}else{n.getWhispersyncEnabledUserSetting().always(function(ae){ac.resolve(ae)})}ac.always(function(af){var ae={};if(ab||!af){ae[constants.BindingKeys.WHISPERSYNC_ENABLED]=false}else{ae[constants.BindingKeys.WHISPERSYNC_ENABLED]=true}var ag=new Result(constants.NativeCallResultCode.SUCCESS,ae);Z.resolve(ag)})})});break;case constants.ServiceActionCode.SHOW_OVERLAY_ACHIEVEMENTS:var Y={};Y[constants.OverlayBindingKeys.OVERLAY_ACTION_CODE_KEY]=constants.OverlayActionCode.SHOW_ACHIEVEMENTS;hostinterface.showOverlay(JSON.stringify(Y));break;case constants.ServiceActionCode.SHOW_OVERLAY_PROFILE:var Y={};Y[constants.OverlayBindingKeys.OVERLAY_ACTION_CODE_KEY]=constants.OverlayActionCode.SHOW_PROFILE;hostinterface.showOverlay(JSON.stringify(Y));break;case constants.ServiceActionCode.SHOW_OVERLAY_LEADERBOARDS:var Y={};Y[constants.OverlayBindingKeys.OVERLAY_ACTION_CODE_KEY]=constants.OverlayActionCode.SHOW_LEADERBOARDS;hostinterface.showOverlay(JSON.stringify(Y));break;case constants.ServiceActionCode.SHOW_OVERLAY_RANKS:var Y={};Y[constants.OverlayBindingKeys.OVERLAY_ACTION_CODE_KEY]=constants.OverlayActionCode.SHOW_LEADERBOARD_RANKS;Y[constants.LeaderboardBindingKeys.LEADERBOARD_ID_KEY]=y.getParams()[constants.LeaderboardBindingKeys.LEADERBOARD_ID_KEY];hostinterface.showOverlay(JSON.stringify(Y));break;case constants.ServiceActionCode.SHOW_GAME_CIRCLE:case constants.ServiceActionCode.SHOW_OVERLAY_SUMMARY:var Y={};Y[constants.OverlayBindingKeys.OVERLAY_ACTION_CODE_KEY]=constants.OverlayActionCode.SHOW_SUMMARY;hostinterface.showOverlay(JSON.stringify(Y));var R=new Result(constants.NativeCallResultCode.SUCCESS,{});Z.resolve(R);break;case constants.ServiceActionCode.HANDLE_TOAST_CLICK:var L={};var J=y.getParams()[constants.ToastKeys.ACTION_MAPPINGS_KEY];var W=y.getParams()[constants.ToastKeys.TOAST_CLICK_DATA_KEY];var U=ServiceFactory.getRequestFactory().createToastClickRequest(J,W);ServiceFactory.getRequestRouter().handleRequest(U).always(function(ab){Z.resolve({})});break;case constants.ServiceActionCode.HANDLE_TOAST_DISPLAY_METRIC:var L={};var F=y.getParams()[constants.ToastKeys.TOAST_REQUEST_DISPLAYED];var I=ServiceFactory.getRequestFactory().createToastMetricRequest(F);ServiceFactory.getRequestRouter().handleRequest(I).always(function(ab){Z.resolve({})});break;case constants.ServiceActionCode.PROCESS_OFFLINE_EVENT:var L={};var D=ServiceFactory.getRequestFactory().createProcessOfflineEventRequest(y.getParams()["jsonEvent"]);ServiceFactory.getRequestRouter().handleRequest(D).always(function(ab){Z.resolve(l(ab))});break;case constants.ServiceActionCode.REQUEST_ACHIEVEMENT:var Q=y.getParams()[constants.AchievementsBindingKeys.ACHIEVEMENT_ID_KEY];var O=y.getParams()[constants.ProfilesBindingKeys.PLAYER_ID_KEY];var P=ServiceFactory.getRequestFactory().createGetAchievementRequest(Q,O,false);var N=ServiceFactory.getRequestRouter().handleRequest(P);N.done(function(ab){Z.resolve(j(ab))});break;case constants.ServiceActionCode.REQUEST_ACHIEVEMENTS:var Q=y.getParams()[constants.AchievementsBindingKeys.ACHIEVEMENT_ID_KEY];var O=y.getParams()[constants.ProfilesBindingKeys.PLAYER_ID_KEY];var T=ServiceFactory.getRequestFactory().createGetAchievementsRequest(O,false);var N=ServiceFactory.getRequestRouter().handleRequest(T);N.done(function(ab){Z.resolve(b(ab))});break;case constants.ServiceActionCode.UPDATE_ACHIEVEMENT_PROGRESS:var C=ServiceFactory.getRequestFactory().createUpdateAchievementsRequest(y.getParams()["ACHIEVEMENT_ID"],y.getParams()["ACHIEVEMENT_UPDATE_PERCENT"]);var N=ServiceFactory.getRequestRouter().handleRequest(C);N.done(function(ab){Z.resolve(h(ab))});break;case constants.ServiceActionCode.REQUEST_LEADERBOARDS:var E=ServiceFactory.getRequestFactory().createGetLeaderboardsForGameRequest(y.getParams()["GAME_ID"],false);var N=ServiceFactory.getRequestRouter().handleRequest(E);N.done(function(ab){Z.resolve(m(ab))});break;case constants.ServiceActionCode.REQUEST_PLAYER_SCORE:var O=y.getParams()[constants.ProfilesBindingKeys.PLAYER_ID_KEY];var X=y.getParams()[constants.LeaderboardBindingKeys.LEADERBOARD_ID_KEY];var x=y.getParams()[constants.LeaderboardBindingKeys.LEADERBOARD_FILTER_KEY];var B=y.getParams()[constants.BindingKeys.GAME_ID_KEY];var u=ServiceFactory.getRequestFactory().createGetHighScoreRequest(O,B,X,x,false);var N=ServiceFactory.getRequestRouter().handleRequest(u);N.done(function(ab){Z.resolve(f(ab))});break;case constants.ServiceActionCode.REQUEST_SCORES:y.getParams()["LEADERBOARD_START_RANK"]=1;y.getParams()["LEADERBOARD_SCORES_COUNT"]=100;var H=ServiceFactory.getRequestFactory().createGetLeaderboardRanksRequest(y.getParams()["GAME_ID"],y.getParams()["LEADERBOARD_ID"],y.getParams()["LEADERBOARD_FILTER"],y.getParams()["LEADERBOARD_START_RANK"],y.getParams()["LEADERBOARD_SCORES_COUNT"],false,false);var N=ServiceFactory.getRequestRouter().handleRequest(H);N.done(function(ab){Z.resolve(g(ab,y.getParams()["LEADERBOARD_START_RANK"]))});break;case constants.ServiceActionCode.REQUEST_PERCENTILES:var O=y.getParams()[constants.ProfilesBindingKeys.PLAYER_ID_KEY];var X=y.getParams()[constants.LeaderboardBindingKeys.LEADERBOARD_ID_KEY];var x=y.getParams()[constants.LeaderboardBindingKeys.LEADERBOARD_FILTER_KEY];var B=y.getParams()[constants.BindingKeys.GAME_ID_KEY];var G=ServiceFactory.getRequestFactory().createGetLeaderboardPercentilesRequest(O,B,X,x,false,false);var N=ServiceFactory.getRequestRouter().handleRequest(G);N.done(function(ab){Z.resolve(i(ab))});break;case constants.ServiceActionCode.SUBMIT_SCORE:var M=ServiceFactory.getRequestFactory().createSubmitScoreRequest(y.getParams()["LEADERBOARD_ID"],y.getParams()["LEADERBOARD_SUBMIT_SCORE"]);var N=ServiceFactory.getRequestRouter().handleRequest(M);N.done(function(ab){Z.resolve(c(ab,y.getParams()["LEADERBOARD_SUBMIT_SCORE"]))});break;case constants.ServiceActionCode.REQUEST_LOCAL_PLAYER_PROFILE:var S=ServiceFactory.getGCSettings().getGuestMode();S.always(function(ab){if(ab){var ac={};ac[constants.BindingKeys.REQUEST_ID_KEY]=y.getParams()[constants.BindingKeys.REQUEST_ID_KEY];ac[constants.ServiceResponseCode.RESPONSE_CODE_KEY]=constants.ServiceResponseCode.NOT_AUTHENTICATED;hostinterface.sendReply(JSON.stringify(ac))}else{var ae=ServiceFactory.getRequestFactory().createGetProfileRequest(false);var ad=ServiceFactory.getRequestRouter().handleRequest(ae);ad.always(function(af){var ah=af.getResultMap();if(ah.hidden){var ag={};ag[constants.BindingKeys.REQUEST_ID_KEY]=y.getParams()[constants.BindingKeys.REQUEST_ID_KEY];ag[constants.ServiceResponseCode.RESPONSE_CODE_KEY]=constants.ServiceResponseCode.NOT_AUTHENTICATED;hostinterface.sendReply(JSON.stringify(ag))}else{var ag={};ag[constants.BindingKeys.REQUEST_ID_KEY]=y.getParams()[constants.BindingKeys.REQUEST_ID_KEY];if($.isEmptyObject(ah)){ag[constants.ServiceResponseCode.RESPONSE_CODE_KEY]=constants.ServiceResponseCode.SERVICE_REQUEST_FAILURE}else{ag[constants.ServiceResponseCode.RESPONSE_CODE_KEY]=constants.ServiceResponseCode.SERVICE_REQUEST_SUCCESS;ag[constants.ProfilesBindingKeys.ALIAS_KEY]=ah.alias;ag[constants.ProfilesBindingKeys.PLAYER_ID_KEY]=ah.playerId;ag[constants.ProfilesBindingKeys.AVATAR_URL_KEY]=ah.avatarUrl}hostinterface.sendReply(JSON.stringify(ag))}})}});break;case constants.ServiceActionCode.REQUEST_LOCAL_PLAYER_FRIENDS_PROFILES:var S=ServiceFactory.getGCSettings().getGuestMode();var V=y.getParams()[constants.ProfilesBindingKeys.FRIENDS_PLAYER_IDS_KEY];S.always(function(ab){if(ab){var ad={};ad[constants.BindingKeys.REQUEST_ID_KEY]=y.getParams()[constants.BindingKeys.REQUEST_ID_KEY];ad[constants.ServiceResponseCode.RESPONSE_CODE_KEY]=constants.ServiceResponseCode.NOT_AUTHENTICATED;hostinterface.sendReply(JSON.stringify(ad))}else{var ac=ServiceFactory.getRequestFactory().createGetMyFriendProfilesRequest(V,false);var ae=ServiceFactory.getRequestRouter().handleRequest(ac);ae.always(function(af){var ak={};ak[constants.BindingKeys.REQUEST_ID_KEY]=y.getParams()[constants.BindingKeys.REQUEST_ID_KEY];var aj=af.getResultMap();if($.isEmptyObject(aj)||!(aj instanceof Array)){ak[constants.ServiceResponseCode.RESPONSE_CODE_KEY]=constants.ServiceResponseCode.SERVICE_REQUEST_FAILURE}else{var ai=aj[0];if($.isEmptyObject(ai)){ak[constants.ServiceResponseCode.RESPONSE_CODE_KEY]=constants.ServiceResponseCode.SERVICE_REQUEST_FAILURE}else{var ag=ai.playerIdentities;if($.isEmptyObject(ag)||!(ag instanceof Array)){ak[constants.ServiceResponseCode.RESPONSE_CODE_KEY]=constants.ServiceResponseCode.SERVICE_REQUEST_FAILURE}else{var ah=[];$.each(ag,function(al,an){var am={};am[constants.ProfilesBindingKeys.ALIAS_KEY]=an.alias;am[constants.ProfilesBindingKeys.PLAYER_ID_KEY]=an.playerId;am[constants.ProfilesBindingKeys.AVATAR_URL_KEY]=an.avatarUrl;ah.push(am)});ak[constants.ProfilesBindingKeys.FRIENDS_PROFILES_KEY]=ah;ak[constants.ServiceResponseCode.RESPONSE_CODE_KEY]=constants.ServiceResponseCode.SERVICE_REQUEST_SUCCESS}}}hostinterface.sendReply(JSON.stringify(ak))})}});break;case constants.ServiceActionCode.REQUEST_LOCAL_PLAYER_FRIENDS:var w=ServiceFactory.getRequestFactory().createGetMyFriendsRequest();var N=ServiceFactory.getRequestRouter().handleRequest(w);N.done(function(ab){Z.resolve(e(ab))});break;default:console.log("Message not supported what="+A);console.log("APICallHandler: handleRequest: actionCode not supported");var K=new Result(constants.NativeCallResultCode.ERROR,{});Z.resolve(K)}}console.log("End of API handler call");return Z.promise()}};var l=function(n){var o={};var p=constants.NativeCallResultCode.ERROR;if(n instanceof Result){p=n.getType()}var q=new Result(p,o);return q};var a=function(o,q){var n={};if(o!==undefined&&q!==undefined&&o&&q){n[constants.AchievementsBindingKeys.ACHIEVEMENT_ID_KEY]=o.id;n[constants.AchievementsBindingKeys.ACHIEVEMENT_TITLE_KEY]=o.title;n[constants.AchievementsBindingKeys.ACHIEVEMENT_DESCRIPTION_KEY]=o.description;n[constants.AchievementsBindingKeys.ACHIEVEMENT_POINTS_KEY]=o.pointValue;n[constants.AchievementsBindingKeys.ACHIEVEMENT_HIDDEN_KEY]=o.hiddenValue;n[constants.AchievementsBindingKeys.ACHIEVEMENT_POSITION_KEY]=o.position;n[constants.AchievementsBindingKeys.ACHIEVEMENT_UNLOCKED_KEY]=q.unlocked;n[constants.AchievementsBindingKeys.ACHIEVEMENT_UPDATE_PERCENT_KEY]=q.progress;if(n[constants.AchievementsBindingKeys.ACHIEVEMENT_UNLOCKED_KEY]){n[constants.AchievementsBindingKeys.ACHIEVEMENT_DATE_UNLOCKED_KEY]=q.dateUnlocked;n[constants.AchievementsBindingKeys.ACHIEVEMENT_ICON_URL_LARGE_KEY]=o.largeIconUrl}else{n[constants.AchievementsBindingKeys.ACHIEVEMENT_DATE_UNLOCKED_KEY]=0;n[constants.AchievementsBindingKeys.ACHIEVEMENT_ICON_URL_LARGE_KEY]=o.lockedLargeIconUrl}for(var p in n){if(n.hasOwnProperty(p)&&(n[p]===undefined||n[p]===null)){n={error:"error"};break}}}else{n={error:"error"}}return n};var b=function(n){var p={};var s=constants.NativeCallResultCode.ERROR;if(n instanceof Result&&n.getType()===constants.NativeCallResultCode.SUCCESS){s=constants.NativeCallResultCode.SUCCESS;var o=[];var r=n.getResultMap()["achievements"]||null;var q=r&&r.achievements;if(Array.isArray(q)){$.each(q,function(v,w){var u=w.achievementMeta;var x=w.playerInfo;var t=a(u,x);if(t.hasOwnProperty("error")){s=constants.NativeCallResultCode.ERROR}o.push(t)})}else{s=constants.NativeCallResultCode.ERROR}if(s===constants.NativeCallResultCode.SUCCESS){p[constants.AchievementsBindingKeys.ACHIEVEMENT_LIST_KEY]=o}}return new Result(s,p)};var j=function(n){var o={};var q=constants.NativeCallResultCode.ERROR;if(n instanceof Result&&n.getType()===constants.NativeCallResultCode.SUCCESS){q=constants.NativeCallResultCode.SUCCESS;var p=n.getResultMap()["achievement"]||null;if(p){o=a(p.achievementMeta,p.playerInfo);if(o.hasOwnProperty("error")){q=constants.NativeCallResultCode.ERROR;o={}}}else{q=constants.NativeCallResultCode.ERROR;o={}}}return new Result(q,o)};var h=function(n){var o={};var p=constants.NativeCallResultCode.ERROR;if(n instanceof Result&&n.getType()===constants.NativeCallResultCode.SUCCESS){p=constants.NativeCallResultCode.SUCCESS;o[constants.AchievementsBindingKeys.ACHIEVEMENT_NEWLY_UNLOCKED_KEY]=n.getResultMap()["newlyUnlocked"];if(o[constants.AchievementsBindingKeys.ACHIEVEMENT_NEWLY_UNLOCKED_KEY]===undefined||o[constants.AchievementsBindingKeys.ACHIEVEMENT_NEWLY_UNLOCKED_KEY]===null){p=constants.NativeCallResultCode.ERROR;o={}}}return new Result(p,o)};var k=function(o){var n={};if(o!==undefined&&o){n[constants.LeaderboardBindingKeys.LEADERBOARD_DISPLAY_TEXT_KEY]=o.DisplayText;n[constants.LeaderboardBindingKeys.LEADERBOARD_ID_KEY]=o.LeaderboardId;n[constants.LeaderboardBindingKeys.LEADERBOARD_NAME_KEY]=o.Name;n[constants.LeaderboardBindingKeys.LEADERBOARD_DATA_FORMAT_KEY]=o.DataFormat;n[constants.LeaderboardBindingKeys.LEADERBOARD_ICON_URL_KEY]=o.IconUrl;for(var p in n){if(n.hasOwnProperty(p)&&(n[p]===undefined||n[p]===null)){n={error:"error"};break}}}else{n={error:"error"}}return n};var m=function(o){var q={};var r=constants.NativeCallResultCode.ERROR;if(o instanceof Result&&o.getType()===constants.NativeCallResultCode.SUCCESS){r=constants.NativeCallResultCode.SUCCESS;var p=[];var n=o.getResultMap()["LeaderboardList"]||null;if(n){$.each(n,function(u,t){var s=k(t.LeaderboardInfo);if(s.hasOwnProperty("error")){r=constants.NativeCallResultCode.ERROR}else{p.push(s)}})}else{r=constants.NativeCallResultCode.ERROR}if(r===constants.NativeCallResultCode.SUCCESS){q[constants.LeaderboardBindingKeys.LEADERBOARD_LIST_KEY]=p}}return new Result(r,q)};var f=function(n){var o={};var q=constants.NativeCallResultCode.ERROR;if(n instanceof Result&&n.getType()===constants.NativeCallResultCode.SUCCESS){q=constants.NativeCallResultCode.SUCCESS;o[constants.LeaderboardBindingKeys.LEADERBOARD_SUBMIT_SCORE_KEY]=n.getResultMap()["PlayerScore"];o[constants.LeaderboardBindingKeys.LEADERBOARD_PLAYER_RANK_KEY]=n.getResultMap()["PlayerRank"];for(var p in o){if(o.hasOwnProperty(p)&&(o[p]===undefined||o[p]===null)){q=constants.NativeCallResultCode.ERROR;o={};break}}}return new Result(q,o)};var e=function(n){var p={};var r=constants.NativeCallResultCode.ERROR;if(n instanceof Result&&n.getType()===constants.NativeCallResultCode.SUCCESS){var o=n.getResultMap();var q=o.playerIds;if(q instanceof Array){r=constants.NativeCallResultCode.SUCCESS;p[constants.ProfilesBindingKeys.FRIENDS_KEY]=q}}return new Result(r,p)};var g=function(v,o){var r=function(w,y){var z={scoreList:[]};if(w===undefined||w===null||typeof w!=="object"||y===undefined||typeof y!=="number"){z={error:"error"}}else{var x=y;$.each(w,function(B,A){var D={};D[constants.LeaderboardBindingKeys.LEADERBOARD_SCORE_VALUE_KEY]=A.Score;D[constants.LeaderboardBindingKeys.LEADERBOARD_KEY]=A.Score;D[constants.LeaderboardBindingKeys.LEADERBOARD_SCORE_RANK_KEY]=x;D[constants.ProfilesBindingKeys.ALIAS_KEY]=A.Username;D[constants.ProfilesBindingKeys.PLAYER_ID_KEY]=A.PlayerId;D[constants.ProfilesBindingKeys.AVATAR_URL_KEY]=A.AvatarUrl||"";z.scoreList.push(D);x++;for(var C in D){if(D.hasOwnProperty(C)&&(D[C]===undefined||D[C]===null)){z.error="error";break}}})}return z};var n={};var u=constants.NativeCallResultCode.ERROR;if(v instanceof Result&&v.getType()===constants.NativeCallResultCode.SUCCESS){u=constants.NativeCallResultCode.SUCCESS;var q=k(v.getResultMap()["LeaderboardInfo"]);var s=r(v.getResultMap()["RankList"],o);var p=!s.hasOwnProperty("error")&&!q.hasOwnProperty("error");p=p&&s.hasOwnProperty("scoreList")&&Array.isArray(s.scoreList);if(p){for(var t in q){if(q.hasOwnProperty(t)){n[t]=q[t]}}n[constants.LeaderboardBindingKeys.LEADERBOARD_SCORES_ARRAY_KEY]=s.scoreList}else{u=constants.NativeCallResultCode.ERROR}}return new Result(u,n)};var i=function(v){var r=function(w){var x={percentileList:[]};if(w===undefined||w===null||typeof w!=="object"){x={error:"error"}}else{$.each(w,function(y,B){var A={};A[constants.LeaderboardBindingKeys.LEADERBOARD_PERCENTILE_KEY]=B.Percentile;A[constants.LeaderboardBindingKeys.LEADERBOARD_PERCENTILE_PLAYER_SCORE_KEY]=B.PlayerScore;A[constants.LeaderboardBindingKeys.LEADERBOARD_PERCENTILE_PLAYER_NAME_KEY]=B.PlayerName;A[constants.LeaderboardBindingKeys.LEADERBOARD_PERCENTILE_PLAYER_ID_KEY]=B.PlayerId;A[constants.LeaderboardBindingKeys.LEADERBOARD_PERCENTILE_PLAYER_AVATAR_URL_KEY]=B.AvatarUrl||"";for(var z in A){if(A.hasOwnProperty(z)&&(A[z]===undefined||A[z]===null)){x.error="error";break}}x.percentileList.push(A)})}return x};var o={};var u=constants.NativeCallResultCode.ERROR;if(v instanceof Result&&v.getType()===constants.NativeCallResultCode.SUCCESS){u=constants.NativeCallResultCode.SUCCESS;var q=k(v.getResultMap()["LeaderboardInfo"]);var s=r(v.getResultMap()["PercentileList"]);var n=v.getResultMap()["UserIndex"];var p=!s.hasOwnProperty("error")&&!q.hasOwnProperty("error");p=p&&s.hasOwnProperty("percentileList")&&Array.isArray(s.percentileList);p=p&&n!==undefined&&typeof n==="number";if(p){for(var t in q){if(q.hasOwnProperty(t)){o[t]=q[t]}}o[constants.LeaderboardBindingKeys.LEADERBOARD_PERCENTILES_ARRAY_KEY]=s.percentileList;o[constants.LeaderboardBindingKeys.LEADERBOARD_USER_INDEX_KEY]=n}else{u=constants.NativeCallResultCode.ERROR}}return new Result(u,o)};var c=function(n){var o={};var q=constants.NativeCallResultCode.ERROR;if(n instanceof Result&&n.getType()===constants.NativeCallResultCode.SUCCESS){q=constants.NativeCallResultCode.SUCCESS;var p=n.getResultMap()["SubmitScoreResultsList"]||null;if(p){o[constants.LeaderboardBindingKeys.LEADERBOARD_SUBMIT_RESULT_KEY]=p}else{q=constants.NativeCallResultCode.ERROR}}return new Result(q,o)};return d}());console.log("APICallHandler loaded.");