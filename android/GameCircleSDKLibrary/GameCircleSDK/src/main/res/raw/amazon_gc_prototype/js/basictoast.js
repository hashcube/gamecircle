/*! Copyright 2013 Amazon Digital Services, Inc. All rights reserved. */
var savedTitle="";var savedLanguageCode="";var savedCountryCode="";var savedXp=0;var toastHasBeenCalledBefore=false;function renderData(d){toastHasBeenCalledBefore=true;var I=d.params;var A=d.aggregateCount;var g=d.languageCode;var D=d.countryCode;D="US";var K=I.savedTitle;var l=I.icon;var B=I.xp;var c=I.showButton;var s=I.dedupeString;var t=I.dedupeStringArgs;var r=I.titleString;var k=I.titleStringArgs;var u=I.descriptionString;var N=I.descriptionStringArgs;var v=I.buttonTextString;var m=I.buttonTextStringArgs;var J=I.showFeatures;var j=I.features;var L=$("#agc-toast");var F=0;var C=d.isFireTV;L.removeClass("show-xp");if(C){L.find("#toast-icon, #toast-icon-blank").attr("src","img/gamecircle/bueller/beach_ball_65x65.png");L.find("#agc-toast-leaderboards img").attr("src","img/gamecircle/bueller/leaderboards_26x26.png");L.find("#agc-toast-achievements img").attr("src","img/gamecircle/bueller/achievements_26x26.png");L.find("#agc-toast-whispersync img").attr("src","img/gamecircle/bueller/whisper_sync_26x26.png");L.addClass("darkToast")}if(A!==undefined&&parseInt(A,10)>0){if(savedLanguageCode!==""){g=savedLanguageCode}if(savedCountryCode!==""){savedCountryCode=savedCountryCode}if(s!==undefined&&s!==null){var E={};if(t!==undefined&&t!==null){$.each(t,function(i,O){var P=O;if(O==="${targetDupes}"){P=A}else{if(O==="${savedTitle}"){P=savedTitle}}E[i]=P})}z=StringsUtility.getString(s,g,D,E)}if(typeof B==="number"&&B>0){savedXp+=B;L.find("#agc-toast-xp-text").text("+"+savedXp);L.addClass("show-xp")}L.find("#agc-toast-title").html(z);L.find("#agc-toast-description").html("")}else{savedTitle=K;savedLanguageCode=g;savedCountryCode=D;savedXp=0;L.find("div.agc-toast-buttons, button, ul, li").hide();var z=StringsUtility.getString(r,g,D,k);var p=StringsUtility.getString(u,g,D,N);L.find("#agc-toast-title").html(z);L.find("#agc-toast-description").html(p);if(c==="true"){var h=StringsUtility.getString(v,g,D,m);L.find("button").html(h).show();L.find("div.agc-toast-buttons").show().width(L.find("button").outerWidth())}else{if(c==="false"){if(J==="true"){if(j!==undefined&&j.length>0){if(j.indexOf("leaderboards")!==-1){L.find("#agc-toast-leaderboards").css("display","inline");F++}if(j.indexOf("achievements")!==-1){L.find("#agc-toast-achievements").css("display","inline");F++}if(j.indexOf("whispersync")!==-1){L.find("#agc-toast-whispersync").css("display","inline");F++}}if(F>0){L.find("#agc-toast-features").show();L.find("div.agc-toast-buttons").show().width(L.find("#agc-toast-features").outerWidth())}else{L.addClass("no-features")}}if(typeof B==="number"&&B>0){L.find("#agc-toast-xp-text").text("+"+B);L.addClass("show-xp");savedXp=B}}}if(l!==undefined&&l!==null&&l.length>0){var q=ImageUtility.imageURLToLocalPath(l);L.find("#toast-icon").attr("src",q).load(function n(){$("#toast-icon-blank",$(this).parent()).hide();$(this).show()})}else{L.find("img.agc-icon").attr("src","img/gamecircle/icon-64-beachball.png")}}var a=constants.OverlaySize.TOAST_WIDTH_PIXELS;var b=["padding-left","padding-right","border-left-width","border-right-width"];for(var M=0;M<b.length;M++){a-=parseInt(L.css(b[M]),10);a-=parseInt(L.find("div.agc-toast-body").css(b[M]),10)}a-=L.find("div.agc-toast-icon").width();if(c==="true"||F>0){a-=L.find("div.agc-toast-buttons").width()}var e=L.find("#agc-toast-xp-container:visible");if(e.length>0){var G=$(".agc-toast-body");var H=$("#agc-toast-xp-text");var x=$("#agc-toast-xp-icon");a-=x.outerWidth()+H.outerWidth()+15}var y=L.find("#agc-toast-description");var w=L.find("#agc-toast-title");var o=L.find("div.agc-toast-body");o.width(a);w.width(a);y.width(a);L.css("width","100%");function f(R,O,T){var P="...";var S=/\.\.\.$/;var U=R.html();var i=parseInt(R.css("line-height"),10)*O;while(U.length>0&&R.height()>i){U=U.replace(S,"");var Q=(!T)?U.lastIndexOf(" "):U.length-1;if(Q>P.length){U=U.substring(0,Q)+P}else{if(U.length>(P.length*2)){U=U.substring(0,U.length-(P.length*2))+P}else{U=""}}R.html(U)}}if(w.height()>parseInt(w.css("line-height"),10)){f(w,2,true)}if(parseInt(y.height(),10)>parseInt(y.css("line-height"),10)*2){f(y,2,false)}};