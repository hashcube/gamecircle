/*! Copyright 2013 Amazon Digital Services, Inc. All rights reserved. */
GCSettings=(function(){var a=function(){var k=constants.NativeCallKeys.GUEST_MODE;var q=constants.NativeCallKeys.PLAYER_ID;var t=constants.NativeCallKeys.AGE_VIOLATION;var p=constants.NativeCallKeys.DEV_FEATURES;var e=constants.NativeCallKeys.HIDDEN_FLAG;var r=constants.NativeCallKeys.COUNTRY_SUPPORT;var j=constants.OfflineCacheTypes.ACHIEVEMENTS_EXIST_CACHE;var f=constants.OfflineCacheTypes.LEADERBOARDS_EXIST_CACHE;var b="ftue:connected";var s="user:whispersyncEnabled";var c="user:corSupport";var l="ftue:lastTimeUpsellAlertShown";var o="game:featuresUsed";var g=this;this["getGuestMode"]=function(){var u=$.Deferred();m(k,"true").always(function(v){u.resolve(v=="true")});return u.promise()};this["setGuestMode"]=function(u){return i(k,u)};this["getAgeViolation"]=function(){var u=$.Deferred();m(t,"false").always(function(v){u.resolve(v=="true")});return u.promise()};this["setAgeViolation"]=function(u){return i(t,u)};this["setAchievementsLeaderboardsExist"]=function(u,v){return(i(j,u)&&i(f,v))};this["achievementsExist"]=function(){return m(j,"true")};this["leaderboardsExist"]=function(){return m(f,"true")};this["getPlayerId"]=function(){return m(q,null)};this["getDeveloperSpecifiedFeatures"]=function(){return m(p,null)};this["setPlayerId"]=function(u){return i(q,u)};this["getHiddenFlag"]=function(){return m(e,null)};this["setHiddenFlag"]=function(u){return i(e,u)};this["getGlobalCORSupportLevel"]=function(){return m(r,null)};this["setGlobalCORSupportLevel"]=function(u){return i(r,u)};this["getFTUEConnected"]=function(){return d(b)};this["setFTUEConnected"]=function(u){return h(b,u)};this["getUserCORSupport"]=function(){return d(c)};this["setUserCORSupport"]=function(u){if(u){g.setGlobalCORSupportLevel(u.supportLevel)}else{g.setGlobalCORSupportLevel(null)}return h(c,u)};this["getLastTimeUpsellAlertShown"]=function(){return d(l)};this["setLastTimeUpsellAlertShown"]=function(u){return h(l,u)};this["getWhispersyncEnabledUserSetting"]=function(){return d(s)};this["setWhispersyncEnabledUserSetting"]=function(u){return h(s,u)};this["getFeaturesUsed"]=function(){var u={};u[constants.NativeCallKeys.PRIMARY_KEY]=o;return NativeTransport.callNative({nativeCall:constants.NativeCallTypes.GET_SETTING,args:u})};this["setFeaturesUsed"]=function(u){var v={};v[constants.NativeCallKeys.PRIMARY_KEY]=o;v[constants.NativeCallKeys.SECONDARY_KEY]=o;v[constants.NativeCallKeys.VALUE]=u;return NativeTransport.callNative({nativeCall:constants.NativeCallTypes.PUT_SETTING,args:v})};this["isKindle"]=function(){return n(constants.NativeCallTypes.IS_KINDLE)};this["isGCServiceReady"]=function(){return n(constants.NativeCallTypes.IS_GC_SERVICE_READY)};this["isKindleRegistered"]=function(){return n(constants.NativeCallTypes.IS_KINDLE_REGISTERED)};this["getApkVersion"]=function(){return n(constants.NativeCallTypes.GET_APK_VERSION)};this["hasOptedIn"]=function(){return n(constants.NativeCallTypes.HAS_OPTED_IN)};this["setOptIn"]=function(v){var u={};u[constants.NativeCallKeys.HAS_OPTED_IN]=v;return NativeTransport.callNative({nativeCall:constants.NativeCallTypes.SET_OPT_IN,args:u})};this["isKindleWhispersyncSettingEnabled"]=function(){return n(constants.NativeCallTypes.IS_WHISERPSYNC_ENABLED)};this["canLaunchKindleSettings"]=function(){return n(constants.NativeCallTypes.CAN_LAUNCH_KINDLE_SETTINGS)};var d=function(v){var w={};w[constants.NativeCallKeys.PRIMARY_KEY]=v;var x=NativeTransport.callNative({nativeCall:constants.NativeCallTypes.GET_SETTING,args:w});var u=$.Deferred();x.always(function(y){if(y==null){u.resolve(null)}else{u.resolve(y.value)}});return u.promise()};var h=function(u,w){var v={};v[constants.NativeCallKeys.PRIMARY_KEY]=u;v[constants.NativeCallKeys.SECONDARY_KEY]=u;v[constants.NativeCallKeys.VALUE]={value:w};return NativeTransport.callNative({nativeCall:constants.NativeCallTypes.PUT_SETTING,args:v})};var m=function(w,v){var x=NativeTransport.callNative({nativeCall:constants.NativeCallTypes.BATCH_GET_GLOBAL_STATE,args:{}});var u=$.Deferred();x.always(function(y){if(y==null||y[w]==null){u.resolve(v)}else{u.resolve(""+y[w])}});return u.promise()};var i=function(u,w){var v={};v[u]=w;return NativeTransport.callNative({nativeCall:constants.NativeCallTypes.BATCH_PUT_GLOBAL_STATE,args:v})};var n=function(v){var w={};var x=NativeTransport.callNative({nativeCall:v,args:w});var u=$.Deferred();x.always(function(y){if(y==null||y.value==null){u.resolve(null)}else{u.resolve(y.value)}});return u.promise()}};return a}());console.log("GCSettings loaded.");